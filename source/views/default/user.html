<!DOCTYPE html>

{{if auth.user is not None:}}

{{if request.args(0)=='login':}}
{{redirect(URL('default', 'index'))}}
{{pass}}

{{if request.args(0)=='request_reset_password':}}
{{redirect(URL('default', 'user/change_password'))}}
{{pass}}

{{pass}}

<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Larry</title>
    <!-- Tell the browser to be responsive to screen width -->
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
    <link rel="stylesheet" href="{{=URL('static','components/bootstrap/dist/css/bootstrap.min.css')}}" type="text/css">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="{{=URL('static','components/font-awesome/css/font-awesome.min.css')}}" type="text/css">
    <!-- Theme style -->
    <link rel="stylesheet" href="{{=URL('static','dist/css/AdminLTE.min.css')}}" type="text/css">
    <!-- AdminLTE Skins. We have chosen the skin-blue for this starter
         page. However, you can choose any other skin. Make sure you
         apply the skin class to the body tag so the changes take effect. -->
    <link rel="stylesheet" href="{{=URL('static','dist/css/skins/skin-blue.min.css')}}" type="text/css">

    <!-- Google Font -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700,300italic,400italic,600italic">

    <!-- jQuery 3 -->
    <script src="{{=URL('static','components/jquery/dist/jquery.min.js')}}"></script>
    <!-- Bootstrap 3.3.7 -->
    <script src="{{=URL('static','components/bootstrap/dist/js/bootstrap.min.js')}}"></script>
    <!-- AdminLTE App -->
    <script src="{{=URL('static','dist/js/adminlte.min.js')}}"></script>
    <!-- Vue.js -->
    <script src="{{=URL('static', 'js/vue.min.js')}}"></script>

  </head>

  <body class="hold-transition login-page">
    <div class="login-box">
      <div class="login-logo">
        <b>Larry</b>HSM
      </div>

      <div id="web2py_user_form" class="login-box-body">
        {{=form.custom.begin}}

        {{form.custom.submit['_class']="btn btn-primary btn-flat"}}

        <!-- Login page -->

        {{if request.args(0)=='login':}}

        <p class="login-box-msg">Sign in to start your session</p>

        {{form.custom.widget.email['_placeholder']="Email"}}
        {{form.custom.widget.password['_placeholder']="Password"}}

        <div class="form-group"> {{=form.custom.widget.email}} </div>
        <div class="form-group"> {{=form.custom.widget.password}} </div>
        <div class="form-group">
          {{=form.custom.submit}}
          <div class="pull-right">
            {{=form.custom.label['remember_me']}}
            {{=form.custom.widget.remember_me}}
          </div>
        </div>

        <div class="form-group">
          <br/><a href="{{=URL(args='register')}}">Register</a>
          <br/><a href="{{=URL(args='request_reset_password')}}">Lost password</a>
        </div>

        <!-- Register page -->

        {{elif request.args(0)=='register':}}

        <p class="login-box-msg">Create an account to continue</p>

        {{form.custom.widget.first_name['_placeholder']="First name"}}
        {{form.custom.widget.last_name['_placeholder']="Last name"}}
        {{form.custom.widget.email['_placeholder']="Email"}}
        {{form.custom.widget.password['_placeholder']="Password"}}
        {{form.custom.widget.password_two['_placeholder']="Confirm password"}}

        <div class="form-group"> {{=form.custom.widget.first_name}} </div>
        <div class="form-group"> {{=form.custom.widget.last_name}} </div>
        <div class="form-group"> {{=form.custom.widget.email}} </div>
        <div class="form-group"> {{=form.custom.widget.password}} </div>
        <div class="form-group"> {{=form.custom.widget.password_two}} </div>
        <div class="form-group"> {{=form.custom.submit}} </div>

        <div class="form-group">
          <br/><a href="{{=URL(args='login')}}">Log in</a>
        </div>

        <!-- Reset password page -->

        {{elif request.args(0)=='request_reset_password':}}

        <p class="login-box-msg">Lost password</p>

        {{form.custom.widget.email['_placeholder']="Email"}}

        <div class="form-group"> {{=form.custom.widget.email}} </div>
        <div class="form-group"> {{=form.custom.submit}} </div>

        <div class="form-group">
          <br/><a href="{{=URL(args='login')}}">Log in</a>
          <br/><a href="{{=URL(args='register')}}">Register</a>
        </div>

        <!-- Profile settings page -->

        {{elif request.args(0)=='profile':}}

        <p class="login-box-msg">Account information</p>

        {{form.custom.widget.first_name['_placeholder']="First name"}}
        {{form.custom.widget.last_name['_placeholder']="Last name"}}

        {{=form.custom.label["first_name"]}}
        <div class="form-group"> {{=form.custom.widget.first_name}} </div>
        {{=form.custom.label["last_name"]}}
        <div class="form-group"> {{=form.custom.widget.last_name}} </div>
        <!-- Not displaying as a field for some reason -->
        <!-- {{=form.custom.label["email"]}} -->
        <!-- <div class="form-group"> {{=form.custom.widget.email}} </div> -->
        <div class="form-group"> {{=form.custom.submit}} </div>

        <div class="form-group">
          <br/><a href="{{=URL(args='change_password')}}">Change password</a>
          <br/><a href="{{=URL('default', 'index')}}">Return home</a>
        </div>

        <!-- Change password page -->

        {{elif request.args(0)=='change_password':}}

        <p class="login-box-msg">Password change</p>

        {{form.custom.widget.old_password['_placeholder']="Old password"}}
        {{form.custom.widget.new_password['_placeholder']="New password"}}
        {{form.custom.widget.new_password2['_placeholder']="Re-enter password"}}

        {{=form.custom.label["old_password"]}}
        <div class="form-group"> {{=form.custom.widget.old_password}} </div>
        {{=form.custom.label["new_password"]}}
        <div class="form-group"> {{=form.custom.widget.new_password}} </div>
        {{=form.custom.label["new_password2"]}}
        <div class="form-group"> {{=form.custom.widget.new_password2}} </div>
        <div class="form-group"> {{=form.custom.submit}} </div>

        <div class="form-group">
          <br/><a href="{{=URL(args='profile')}}">Profile</a>
          <br/><a href="{{=URL('default', 'index')}}">Return home</a>
        </div>

        {{pass}}

        {{=form.custom.end}}
      </div>
    </div>
  </body>

  {{block page_js}}

</html>
